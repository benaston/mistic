!function(a){"use strict";var b={};!function(a){function b(a,b){if(a=null==a?{}:a,b=b||window,"object"!=typeof a)throw"root object must be an object.";d()||e()||f(b)||(b.module={set exports(b){if(void 0===b)throw"module not defined.";if(null!==b){if(!b.hasOwnProperty("_path_"))throw"_path_ own-property must be present on modules registered with kwire.";if("string"!=typeof b._path_)throw"_path_ own-property must be a string.";a[b._path_]=b}}},b.require=function(d,e){var f=Array.isArray(d);if(null==d)throw"value not defined.";if("string"!=typeof d&&!f)throw"value must be a string or an array.";if(e)return f?e.apply(null,d.map(function(b){return a[b]})):e(a[d]);var g=a[d];return void 0===g?b[c(d)]:g})}function c(a){return a.replace(/(\-([^-]{1}))/g,function(a,b,c){return c.toUpperCase()})}function d(){return"object"==typeof exports&&module}function e(){return"function"==typeof define&&define.amd}function f(a){return a.module&&a.require}b.camelify=c,a.kwire=b}(b),"object"==typeof exports&&module?module.exports=b:"function"==typeof define&&define.amd?define(function(){return b}):a.kwire=b.kwire}(this),function(a){"use strict";var b={};!function(a){function b(a){var b,e;return a?(b=Array.prototype.slice.call(a),e=Array.prototype.slice.call(arguments,1),h(a)?c(b,e):d(a,e)):a}function c(a,b){var c,d;c=b.length?b:a,d=c===a?g:f.bind(null,a),c.reduce(d,null)}function d(a,b){var c,d;c=b.length?b:Object.keys(a),d=e.bind(null,a),c.reduce(d,null)}function e(a,b,c){if(void 0===a[c])throw c+" not defined."}function f(a,b,c,d){if("_"!==c&&void 0===a[d])throw c+" not defined."}function g(a,b){if(void 0===b)throw"argument not defined."}function h(a){return"[object Arguments]"===Object.prototype.toString.call(a)}a.need=b}(b),"object"==typeof exports&&module?module.exports=b:"function"==typeof define&&define.amd?define(function(){return b}):a.niid=b}(this),function(a){"use strict";var b={};!function(a){function b(){}b.truthy=function(){return!0},b.falsy=function(){return!1},b.exception=function(a){throw a},a.noopaam=b}(b),"object"==typeof exports&&module?module.exports=b.noopaam:"function"==typeof define&&define.amd?define(function(){return b.noopaam}):a.noopaam=b.noopaam}(this),function(a){"use strict";var b={};!function(a){function b(a){var b;if("function"!=typeof a)throw"First argument must be a function.";return arguments.length<=1?a:(b=Array.prototype.slice.call(arguments,1),function(){return a.apply(this,b.concat(Array.prototype.slice.call(arguments)))})}function c(){var a=arguments;return function(){return b.apply(this,a).apply(this,arguments)}}a.partial=b,a.partial1=c}(b),"object"==typeof exports&&module?module.exports=b:"function"==typeof define&&define.amd?define(function(){return b}):a.partialApplication=b}(this),function(a){"use strict";var b={};!function(a){function b(a,b){return Array.prototype.slice.call(b,a.length)}function c(a,b,c){return a.apply(c||this,b)}a.rest=b,a.spread=c}(b),"object"==typeof exports&&module?module.exports=b:"function"==typeof define&&define.amd?define(function(){return b}):a.sprest=b}(this),function(a){"use strict";var b={};!function(a){function b(a){var b=Array.prototype.slice.call(arguments,1);switch(typeof a){case"function":return f(a.prototype,b),a;case"object":return f(a,b)}return a}function c(a,b){var c,d,e;for(c=0;c<b.length;c++)if(e=b[c],null!=e)for(d in e)e.hasOwnProperty(d)&&(a[d]=e[d]);return a}function d(a,b){return b.forEach(function(b){null!=b&&Object.keys(b).forEach(function(c){var d=Object.getOwnPropertyDescriptor(b,c);d.configurable=!0,Object.defineProperty(a,c,d)})}),a}function e(){return Object.getOwnPropertyDescriptor&&Array.prototype.forEach}var f=function(){return e()?d:c}();a.mix=b}(b),"object"==typeof exports&&module?module.exports=b:"function"==typeof define&&define.amd?define(function(){return b}):a.mixx=b}(this),function(a){"use strict";var b={};kwire(b),function(){function a(a,c,d){if(c&&g(f(c.condition,a.targetState,a.statefulObject),d))return b(a,d,c);if(!a.machine.parent)throw"invalid state transition. current: "+a.machine.currentState.value+" target: "+a.targetState.value;return g(f(a.machine.parent.triggerTransition,a.targetState),d)}function b(a,b,c){var d;return g(a.machine.currentState.exitAction,b),d=g(f(c.transitionAction,a),b),g(a.targetState.entryAction,b),a.machine.currentState=a.targetState,d}function c(a){return a.machine.transitions.find(function(b){return b.startStates.some(function(b){return b.value===a.machine.currentState.value})&&b.endStates.some(function(b){return b.value===a.targetState.value})})}var d=require("mixx").mix,e=require("niid").need,f=require("partial-application").partial,g=require("sprest").spread,h=require("sprest").rest,i={},j=Object.freeze({statefulObject:void 0,machine:void 0,targetState:void 0});i.triggerTransition=function k(b){if(e(b=d({},j,b)),b.machine.currentState.value===b.targetState.value&&!b.machine.permitSelfTransition)throw"self transition exception";if(b.machine.finalState&&b.machine.currentState.value===b.machine.finalState.value)throw"final state transition exception";return b.machine.currentState.value===b.targetState.value&&b.machine.bypassTransitionBehaviorForSelfTransition?void 0:a(b,c(b),h(k,arguments))},i._path_="./transition-helper",module.exports=i}(),function(){function a(a){c(a=b({},h,a),"name","transitions","initialState"),b(this,a),this.currentState=this.initialState,this.children={},this.parentMachine&&(this.parentMachine.children[this.name]=this)}var b=require("mixx").mix,c=require("niid").need,d=require("partial-application").partial,e=require("sprest").spread,f=require("sprest").rest,g=require("./transition-helper"),h=Object.freeze({name:void 0,transitions:void 0,initialState:void 0,finalState:null,parentMachine:null,permitSelfTransition:!0,bypassTransitionBehaviorForSelfTransition:!1});a.prototype.triggerTransition=function i(a){return c(a=b({machine:this},a),"statefulObject","targetState"),e(d(g.triggerTransition,a),f(i,arguments))},a._path_="./machine",module.exports=a}(),function(){var a=require("noopaam"),b={value:null,entryAction:a,exitAction:a};b._path_="./state",module.exports=b}(),function(){var a=require("niid").need,b=require("partial-application").partial,c=require("sprest").spread,d=require("sprest").rest,e={get parentState(){return this.machine.parentState},get currentState(){return this.machine.currentState},triggerTransition:function f(e){a(e,"targetState");var g;return g=c(b(this.machine.triggerTransition,{statefulObject:this,targetState:e.targetState}),d(f,arguments),this.machine),e.cb&&e.cb(g),this}};e._path_="./stateful",module.exports=e}(),function(){var a={NOT_RUN:1,SUCCESS:2,FAILED:3};a._path_="./transition-action-status",module.exports=a}(),function(){function a(a){c(a=b({},e,a),"startStates","endStates"),b(this,a)}var b=require("mixx").mix,c=require("niid").need,d=require("noopaam"),e=Object.freeze({startStates:void 0,endStates:void 0,condition:d.truthy,transitionAction:d.truthy});a._path_="./transition",module.exports=a}(),"object"==typeof exports&&module?module.exports=b:"function"==typeof define&&define.amd?define(function(){return b}):a.eventApi=b}(this);